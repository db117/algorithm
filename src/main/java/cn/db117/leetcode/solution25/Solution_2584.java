

//ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ã€‚ 
//
// å¦‚æœåœ¨ä¸‹æ ‡ i å¤„ åˆ†å‰² æ•°ç»„ï¼Œå…¶ä¸­ 0 <= i <= n - 2 ï¼Œä½¿å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯å’Œå‰©ä½™å…ƒç´ çš„ä¹˜ç§¯äº’è´¨ï¼Œåˆ™è®¤ä¸ºè¯¥åˆ†å‰² æœ‰æ•ˆ ã€‚ 
//
// 
// ä¾‹å¦‚ï¼Œå¦‚æœ nums = [2, 3, 3] ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ ‡ i = 0 å¤„çš„åˆ†å‰²æœ‰æ•ˆï¼Œå› ä¸º 2 å’Œ 9 äº’è´¨ï¼Œè€Œåœ¨ä¸‹æ ‡ i = 1 å¤„çš„åˆ†å‰²æ— æ•ˆï¼Œå› ä¸º 6
// å’Œ 3 ä¸äº’è´¨ã€‚åœ¨ä¸‹æ ‡ i = 2 å¤„çš„åˆ†å‰²ä¹Ÿæ— æ•ˆï¼Œå› ä¸º i == n - 1 ã€‚ 
// 
//
// è¿”å›å¯ä»¥æœ‰æ•ˆåˆ†å‰²æ•°ç»„çš„æœ€å°ä¸‹æ ‡ i ï¼Œå¦‚æœä¸å­˜åœ¨æœ‰æ•ˆåˆ†å‰²ï¼Œåˆ™è¿”å› -1 ã€‚ 
//
// å½“ä¸”ä»…å½“ gcd(val1, val2) == 1 æˆç«‹æ—¶ï¼Œval1 å’Œ val2 è¿™ä¸¤ä¸ªå€¼æ‰æ˜¯äº’è´¨çš„ï¼Œå…¶ä¸­ gcd(val1, val2) è¡¨ç¤º 
//val1 å’Œ val2 çš„æœ€å¤§å…¬çº¦æ•°ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//
// 
//è¾“å…¥ï¼šnums = [4,7,8,15,3,5]
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šä¸Šè¡¨å±•ç¤ºäº†æ¯ä¸ªä¸‹æ ‡ i å¤„çš„å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯ã€å‰©ä½™å…ƒç´ çš„ä¹˜ç§¯å’Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°çš„å€¼ã€‚
//å”¯ä¸€ä¸€ä¸ªæœ‰æ•ˆåˆ†å‰²ä½äºä¸‹æ ‡ 2 ã€‚ 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//
// 
//è¾“å…¥ï¼šnums = [4,7,15,8,3,5]
//è¾“å‡ºï¼š-1
//è§£é‡Šï¼šä¸Šè¡¨å±•ç¤ºäº†æ¯ä¸ªä¸‹æ ‡ i å¤„çš„å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯ã€å‰©ä½™å…ƒç´ çš„ä¹˜ç§¯å’Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°çš„å€¼ã€‚
//ä¸å­˜åœ¨æœ‰æ•ˆåˆ†å‰²ã€‚
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// n == nums.length 
// 1 <= n <= 10â´ 
// 1 <= nums[i] <= 10â¶ 
// 
//
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ•°å­¦ æ•°è®º ğŸ‘ 22 ğŸ‘ 0


package cn.db117.leetcode.solution25;

import java.util.HashMap;
import java.util.Map;

/**
 * 2584.åˆ†å‰²æ•°ç»„ä½¿ä¹˜ç§¯äº’è´¨.split-the-array-to-make-coprime-products
 *
 * @author db117
 * @since 2023-03-13 11:06:40
 **/

public class Solution_2584 {
    public static void main(String[] args) {
        Solution solution = new Solution_2584().new Solution();
//        System.out.println(solution.findValidSplit(new int[]{4, 7, 15, 8, 3, 5}));
        System.out.println(solution.findValidSplit(new int[]{4, 7, 8, 15, 3, 5}));
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int findValidSplit(int[] nums) {
            int n = nums.length;
            // æ‰¾åˆ°æŸä¸ªè´¨æ•°å‡ºç°çš„æœ€å·¦å’Œæœ€å³è¾¹ï¼Œåˆ†éš”ç‚¹å¿…é¡»åœ¨è¿™ä¸ªåŒºé—´å¤–
            // æŸä¸ªè´¨æ•°å‡ºç°çš„æœ€å·¦è¾¹
            Map<Integer, Integer> left = new HashMap<>();
            // ä»¥ i ä¸ºèµ·ç‚¹çš„åŒºé—´çš„å³ç«¯ç‚¹
            int[] right = new int[n + 1];
            for (int i = 0; i < n; i++) {
                int num = nums[i];
                // åˆ†è§£è´¨æ•°
                for (int d = 2; d * d <= num; d++) {
                    if (num % d == 0) {// è´¨æ•°
                        left.putIfAbsent(d, i);// è®°å½•å·¦ç«¯ç‚¹
                        right[left.get(d)] = i;// è®°å½•å½“å‰åŒºé—´çš„å³è¾¹ç•Œ
                    }
                    while (num % d == 0) {// æŠŠå½“å‰è´¨æ•°é™¤å®Œäº†
                        num /= d;
                    }
                }
                if (num > 1) {
                    // æœ€åè¿˜å‰©ä¸ªè´¨æ•°
                    left.putIfAbsent(num, i);// è®°å½•å·¦ç«¯ç‚¹
                    right[left.get(num)] = i;// è®°å½•å½“å‰åŒºé—´çš„å³è¾¹ç•Œ
                }
            }

            // æ‰¾å‡ºç¬¬ä¸€ä¸ªç‚¹ï¼Œä¸åœ¨åŒºé—´å†…
            // éå†å‡ºç¬¬ä¸€ä¸ªå·¦ç«¯ç‚¹ä¸åœ¨åŒºé—´ç±»çš„ä½ç½®
            int maxR = 0;
            for (int i = 0; i < n; i++) {
                if (i > maxR) {// å½“å‰å·¦ç«¯ç‚¹å¤§äºå‰é¢æ‰€æ¬²çš„å³ç«¯ç‚¹
                    return maxR;
                }
                maxR = Math.max(maxR, right[i]);// è®°å½•åˆ°å½“å‰ä½ç½®æ—¶å³ç«¯ç‚¹çš„æœ€å¤§å€¼
            }

            return -1;
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}