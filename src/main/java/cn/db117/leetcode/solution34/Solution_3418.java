

//ç»™ä½ ä¸€ä¸ª m x n çš„ç½‘æ ¼ã€‚ä¸€ä¸ªæœºå™¨äººä»ç½‘æ ¼çš„å·¦ä¸Šè§’ (0, 0) å‡ºå‘ï¼Œç›®æ ‡æ˜¯åˆ°è¾¾ç½‘æ ¼çš„å³ä¸‹è§’ (m - 1, n - 1)ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œæœºå™¨äººåªèƒ½å‘å³
//æˆ–å‘ä¸‹ç§»åŠ¨ã€‚ 
//
// ç½‘æ ¼ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼åŒ…å«ä¸€ä¸ªå€¼ coins[i][j]ï¼š 
//
// 
// å¦‚æœ coins[i][j] >= 0ï¼Œæœºå™¨äººå¯ä»¥è·å¾—è¯¥å•å…ƒæ ¼çš„é‡‘å¸ã€‚ 
// å¦‚æœ coins[i][j] < 0ï¼Œæœºå™¨äººä¼šé‡åˆ°ä¸€ä¸ªå¼ºç›—ï¼Œå¼ºç›—ä¼šæŠ¢èµ°è¯¥å•å…ƒæ ¼æ•°å€¼çš„ ç»å¯¹å€¼ çš„é‡‘å¸ã€‚ 
// 
//
// æœºå™¨äººæœ‰ä¸€é¡¹ç‰¹æ®Šèƒ½åŠ›ï¼Œå¯ä»¥åœ¨è¡Œç¨‹ä¸­ æœ€å¤šæ„ŸåŒ– 2ä¸ªå•å…ƒæ ¼çš„å¼ºç›—ï¼Œä»è€Œé˜²æ­¢è¿™äº›å•å…ƒæ ¼çš„é‡‘å¸è¢«æŠ¢èµ°ã€‚ 
//
// æ³¨æ„ï¼šæœºå™¨äººçš„æ€»é‡‘å¸æ•°å¯ä»¥æ˜¯è´Ÿæ•°ã€‚ 
//
// è¿”å›æœºå™¨äººåœ¨è·¯å¾„ä¸Šå¯ä»¥è·å¾—çš„ æœ€å¤§é‡‘å¸æ•° ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
// è¾“å…¥ï¼š coins = [[0,1,-1],[1,-2,3],[2,-3,4]] 
// 
//
// è¾“å‡ºï¼š 8 
//
// è§£é‡Šï¼š 
//
// ä¸€ä¸ªè·å¾—æœ€å¤šé‡‘å¸çš„æœ€ä¼˜è·¯å¾„å¦‚ä¸‹ï¼š 
//
// 
// ä» (0, 0) å‡ºå‘ï¼Œåˆå§‹é‡‘å¸ä¸º 0ï¼ˆæ€»é‡‘å¸ = 0ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (0, 1)ï¼Œè·å¾— 1 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 0 + 1 = 1ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (1, 1)ï¼Œé‡åˆ°å¼ºç›—æŠ¢èµ° 2 æšé‡‘å¸ã€‚æœºå™¨äººåœ¨æ­¤å¤„ä½¿ç”¨ä¸€æ¬¡æ„ŸåŒ–èƒ½åŠ›ï¼Œé¿å…è¢«æŠ¢ï¼ˆæ€»é‡‘å¸ = 1ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (1, 2)ï¼Œè·å¾— 3 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 1 + 3 = 4ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (2, 2)ï¼Œè·å¾— 4 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 4 + 4 = 8ï¼‰ã€‚ 
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
// è¾“å…¥ï¼š coins = [[10,10,10],[10,10,10]] 
// 
//
// è¾“å‡ºï¼š 40 
//
// è§£é‡Šï¼š 
//
// ä¸€ä¸ªè·å¾—æœ€å¤šé‡‘å¸çš„æœ€ä¼˜è·¯å¾„å¦‚ä¸‹ï¼š 
//
// 
// ä» (0, 0) å‡ºå‘ï¼Œåˆå§‹é‡‘å¸ä¸º 10ï¼ˆæ€»é‡‘å¸ = 10ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (0, 1)ï¼Œè·å¾— 10 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 10 + 10 = 20ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (0, 2)ï¼Œå†è·å¾— 10 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 20 + 10 = 30ï¼‰ã€‚ 
// ç§»åŠ¨åˆ° (1, 2)ï¼Œè·å¾— 10 æšé‡‘å¸ï¼ˆæ€»é‡‘å¸ = 30 + 10 = 40ï¼‰ã€‚ 
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// m == coins.length 
// n == coins[i].length 
// 1 <= m, n <= 500 
// -1000 <= coins[i][j] <= 1000 
// 
//
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ ğŸ‘ 3 ğŸ‘ 0


package cn.db117.leetcode.solution34;

import java.util.Arrays;

/**
 * 3418.æœºå™¨äººå¯ä»¥è·å¾—çš„æœ€å¤§é‡‘å¸æ•°.maximum-amount-of-money-robot-can-earn
 *
 * @author db117
 * @since 2025-01-20 16:49:04
 **/

public class Solution_3418 {
    public static void main(String[] args) {
        Solution solution = new Solution_3418().new Solution();

        // [[-7,12,12,13],[-6,19,19,-6],[9,-2,-10,16],[-4,14,-10,-9]]
        System.out.println(solution.maximumAmount(new int[][]{
                {-7, 12, 12, 13},
                {-6, 19, 19, -6},
                {9, -2, -10, 16},
                {-4, 14, -10, -9}
        }));// 60
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        int[][] coins;
        int[][][] memo;
        int m, n;

        public int maximumAmount(int[][] coins) {
            this.coins = coins;
            this.m = coins.length;
            this.n = coins[0].length;
            memo = new int[m][n][3];
            for (int[][] ints : memo) {
                for (int[] anInt : ints) {
                    Arrays.fill(anInt, Integer.MIN_VALUE);
                }
            }
            return dfs(m - 1, n - 1, 2);
        }

        private int dfs(int i, int j, int k) {
            if (i < 0 || j < 0) {
                return Integer.MIN_VALUE / 2;
            }
            int cur = coins[i][j];
            if (i == 0 && j == 0) {
                // åˆ°ä½ç½®äº†
                if (k > 0) {
                    // è¿˜å¯ä»¥ç»§ç»­æ„ŸåŒ–
                    return Math.max(0, cur);
                }
                return cur;
            }


            if (memo[i][j][k] != Integer.MIN_VALUE) {
                return memo[i][j][k];
            }
            // ä¸æ„ŸåŒ–
            int ans = Math.max(dfs(i - 1, j, k), dfs(i, j - 1, k)) + cur;


            // æ„ŸåŒ–
            if (cur < 0 && k > 0) {
                ans = Math.max(ans, dfs(i - 1, j, k - 1));
                ans = Math.max(ans, dfs(i, j - 1, k - 1));

            }

            return memo[i][j][k] = ans;
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}